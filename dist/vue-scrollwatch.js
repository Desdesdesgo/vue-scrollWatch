!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vue-scrollwatch",[],t):"object"==typeof exports?exports["vue-scrollwatch"]=t():n["vue-scrollwatch"]=t()}("undefined"!=typeof self?self:this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/dist/",t(t.s=0)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(1),o=e.n(r),u=function(){function n(n,t){var e=[],r=!0,o=!1,u=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done)&&(e.push(i.value),!t||e.length!==t);r=!0);}catch(n){o=!0,u=n}finally{try{!r&&c.return&&c.return()}finally{if(o)throw u}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(n){for(var t=0,e=n;e;)t+=e.offsetTop,e=e.offsetParent;return t},c=[.5,0,.35,1],a=!1,f=!1,l={},s={},p={},d=null,v=document.scrollingElement,m=null,y=150,b=function(){},h="vueScrollwatch",w=new Event("scroll_watch_done"),j=function(n){null!=m&&clearTimeout(m),m=setTimeout(function(){var n=_(),t=u(n,2),e=t[0],r=t[1];a?a=!1:g(l,e,r),l.el=e.el,l.name=e.name,l.top=e.top,b(10,function(){return[h,"#handleScroll",e.name,e.top]}),v.dispatchEvent(w)},y)},O=function(){var n=s[Object.keys(s).sort()[0]];return n?n.top-E():0},_=function(){var n=s[Object.keys(s).sort()[0]];x(n,Object.keys(s).length!=Object.keys(p).length);var t=Object.keys(p).map(function(n){return Number(n)}).sort(function(n,t){return n-t}),e=t.length-1;if(!(e<=0)){var r=Math.ceil(v.scrollTop+n.top+n.offset);return b(10,function(){return[h,"#get_current_node_and_tops",v.scrollTop,n.top,n.offset,r]}),[T(t,r,0,e),t]}},x=function(n,t){if(0!=t&&i(n.el)!=n.top){b(10,function(){return[h,"#try_update_node_tops",t||i(n.el)-n.top]}),p={};for(var e in s){var r=s[e],o=i(r.el);o!=r.top&&(r.top=o),p[r.top]=r.name}}},T=function n(t,e,r,o){if(b(10,function(){return[h,"#find_current",t[r],t[o],e,r,o]}),r==o)return s[p[t[r]]];var u=Math.floor((r+o)/2);return t[u]<=e&&t[u+1]>e?(b(10,function(){return[h,"#find_current",t[u],u]}),s[p[t[u]]]):t[u]<=e?n(t,e,u+1,o):n(t,e,r,u-1)},g=function(n,t,e){var r=e.indexOf(n.top),o=e.indexOf(t.top);if(r!=o){var u=r<o?1:-1;for(r+=u;u>0?r<=o:r>=o;r+=u){var i=s[p[e[r]]];i&&i.callback&&i.callback(i)}}},k=function(n){f&&(a=!0);var t=s[n];t&&(x(t),S(t.top-t.offset-E()-O()),l.el=t.el,l.name=t.name,l.top=t.top)},E=function(){return i(v)},A=function(n){return new Promise(function(t,e){f&&(a=!0);var r=s[n];r||e(n);var u=v.scrollTop,i=r.top-r.offset-O()-E()-u;x(r);var l=o.a.apply(void 0,c),p=null,m=function n(e){p||(p=e);var o=e-p>=600?600:e-p,c=o/600,a=u+l(c)*i;S(a),o<600?d=window.requestAnimationFrame(n):t(r)};window.requestAnimationFrame(m)})},S=function(n){b(10,function(){return[h,"#moveTo",n]}),v.scrollTop=n},F=function(n,t,e,r){0==Object.keys(s).length&&v.addEventListener("scroll",j);var o=t.value,u=o.name,c=o.offset,a=void 0===c?0:c,f=o.callback,d=i(n);if(n.attributes.name=u,l.name||(l.el=n,l.name=u,l.top=d,l.offset=a),l.name){var m=_();m=m&&m[0].name,b(10,function(){return[h,"#updateNodeList",m,l.name]}),l.name!=m&&k(l.name)}u in s&&delete p[s[u].top],s[u]={name:u,offset:a,top:d,el:n,callback:f},p[d]=u,b(10,function(){return[h,"#updateNodeList",u,a,d,i(n)]})},L=function(n){f=!!n},M=function(n){if(!(v=document.querySelector(n)))throw"[vue-scrollwatch] Element '"+n+"' was not found."},P=function(n){y=n},N={};N.install=function(n){n.directive("scrollWatch",{bind:function(n,t,e){"function"==typeof t.value.db&&(b=t.value.db)},inserted:function(n,t,e){F(n,t)},unbind:function(n,t,e){b(10,function(){return[h,"#install:unbind",t.value.name,s[t.value.name].top]}),delete p[s[t.value.name].top],delete s[t.value.name],0==Object.keys(s).length&&v&&(v.removeEventListener("scroll",j),v=document.scrollingElement),cancelAnimationFrame(d)},update:function(n,t,e){F(n,t)}})},N.currentNode=l,N.jumpTo=k,N.scrollTo=A,N.setBlockWatchOnJump=L,N.setContainer=M,N.setScrollTimerDelay=P,N.nodeList=s,N.nodeTops=p,N.moveTo=S,t.default=N},function(n,t){function e(n,t){return 1-3*t+3*n}function r(n,t){return 3*t-6*n}function o(n){return 3*n}function u(n,t,u){return((e(t,u)*n+r(t,u))*n+o(t))*n}function i(n,t,u){return 3*e(t,u)*n*n+2*r(t,u)*n+o(t)}function c(n,t,e,r,o){var i,c,a=0;do{c=t+(e-t)/2,i=u(c,r,o)-n,i>0?e=c:t=c}while(Math.abs(i)>s&&++a<p);return c}function a(n,t,e,r){for(var o=0;o<l;++o){var c=i(t,e,r);if(0===c)return t;t-=(u(t,e,r)-n)/c}return t}function f(n){return n}var l=4,s=1e-7,p=10,d=11,v=1/(d-1),m="function"==typeof Float32Array;n.exports=function(n,t,e,r){function o(t){for(var r=0,o=1,u=d-1;o!==u&&l[o]<=t;++o)r+=v;--o;var f=(t-l[o])/(l[o+1]-l[o]),s=r+f*v,p=i(s,n,e);return p>=.001?a(t,s,n,e):0===p?s:c(t,r,r+v,n,e)}if(!(0<=n&&n<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===t&&e===r)return f;for(var l=m?new Float32Array(d):new Array(d),s=0;s<d;++s)l[s]=u(s*v,n,e);return function(n){return 0===n?0:1===n?1:u(o(n),t,r)}}}])});
//# sourceMappingURL=vue-scrollwatch.js.map