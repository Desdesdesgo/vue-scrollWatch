!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vue-scrollwatch",[],t):"object"==typeof exports?exports["vue-scrollwatch"]=t():e["vue-scrollwatch"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n.n(r),u=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){for(var t=0,n=e;n;)t+=n.offsetTop,n=n.offsetParent;return t},i=[.5,0,.35,1],l=!1,f=!1,c={},s={},p={},v=null,m=document.scrollingElement,d=null,b=150,y=0,h=0,w=new Event("scroll_watch_done"),x=function(e){null!=d&&clearTimeout(d),d=setTimeout(function(){var e=O(),t=u(e,2),n=t[0],r=t[1];l?l=!1:T(c,n,r),c.el=n.el,c.name=n.name,c.top=n.top,m.dispatchEvent(w)},b)},O=function(){var e=m.scrollTop;if(Object.keys(s).length!=Object.keys(p).length){p={};for(var t in s)p[s[t].top]=s[t].name}var n=Object.keys(p).sort(function(e,t){return e-t}),r=n.length-1;if(!(r<=0)){var o=s[p[n[0]]].el.offsetTop;return o<n[0]?[s[p[n[0]]],n]:[g(n,e+o,0,r),n]}},g=function e(t,n,r,o){if(r==o)return s[p[t[r]]];var u=Math.floor((r+o)/2),a=Number(t[u]);return a<=n&&Number(t[u+1])>n?s[p[t[u]]]:a<=n?e(t,n,u+1,o):e(t,n,r,u-1)},T=function(e,t,n){var r=n.indexOf(e.top.toString()),o=n.indexOf(t.top.toString());if(r!=o){var u=r<o?1:-1;for(r+=u;u>0?r<=o:r>=o;r+=u){var a=s[p[n[r]]];a&&a.callback&&a.callback(a)}}},j=function(e){f&&(l=!0);var t=s[e];t&&(E(a(t.el)-a(m)-t.offset-h+y),c.el=t.el,c.name=t.name,c.top=t.top)},k=function(e){return new Promise(function(t,n){f&&(l=!0);var r=s[e];r||n(e);var u=m.scrollTop,c=a(m),p=a(r.el)-c-u+y,d=o.a.apply(void 0,i),b=null,w=function n(o){b||(b=o);var a=o-b>=600?600:o-b,i=a/600,l=u+d(i)*(p-r.offset-h);E(l),a<600?v=window.requestAnimationFrame(n):(j(e),t(r))};window.requestAnimationFrame(w)})},E=function(e){m.scrollTop=e},A=function(e,t,n,r){0==Object.keys(s).length&&m.addEventListener("scroll",x);var o=t.value,u=o.name,a=o.offset,i=void 0===a?0:a,l=o.callback,f=e.offsetTop-i;if(e.attributes.name=u,c.top||(c.el=e,c.name=u,c.top=f,y=Math.max(0,m.offsetTop-e.offsetTop)),c.name){var v=O();v=v&&v[0].name,c.name!=v&&j(c.name)}u in s&&delete p[s[u].top],s[u]={name:u,offset:i,top:f,el:e,callback:l},p[f]=u},S={};S.install=function(e){e.directive("scrollWatch",{inserted:function(e,t,n){A(e,t)},unbind:function(e,t,n){delete p[s[t.value.name].top],delete s[t.value.name],0==Object.keys(s).length&&m&&(m.removeEventListener("scroll",x),m=document.scrollingElement),cancelAnimationFrame(v)},update:function(e,t,n){A(e,t)}})};var _=function(e){f=!!e},F=function(e){if(!(m=document.querySelector(e)))throw"[vue-scrollwatch] Element '"+e+"' was not found."},M=function(e){b=e},P=function(e){h=e,console.log("vueScrollwatch@212#setGlobalOffset",e,h)};S.currentNode=c,S.jumpTo=j,S.scrollTo=k,S.setBlockWatchOnJump=_,S.setContainer=F,S.setScrollTimerDelay=M,S.setGlobalOffset=P,t.default=S},function(e,t){function n(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function o(e){return 3*e}function u(e,t,u){return((n(t,u)*e+r(t,u))*e+o(t))*e}function a(e,t,u){return 3*n(t,u)*e*e+2*r(t,u)*e+o(t)}function i(e,t,n,r,o){var a,i,l=0;do{i=t+(n-t)/2,a=u(i,r,o)-e,a>0?n=i:t=i}while(Math.abs(a)>s&&++l<p);return i}function l(e,t,n,r){for(var o=0;o<c;++o){var i=a(t,n,r);if(0===i)return t;t-=(u(t,n,r)-e)/i}return t}function f(e){return e}var c=4,s=1e-7,p=10,v=11,m=1/(v-1),d="function"==typeof Float32Array;e.exports=function(e,t,n,r){function o(t){for(var r=0,o=1,u=v-1;o!==u&&c[o]<=t;++o)r+=m;--o;var f=(t-c[o])/(c[o+1]-c[o]),s=r+f*m,p=a(s,e,n);return p>=.001?l(t,s,e,n):0===p?s:i(t,r,r+m,e,n)}if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return f;for(var c=d?new Float32Array(v):new Array(v),s=0;s<v;++s)c[s]=u(s*m,e,n);return function(e){return 0===e?0:1===e?1:u(o(e),t,r)}}}])});
//# sourceMappingURL=vue-scrollwatch.js.map