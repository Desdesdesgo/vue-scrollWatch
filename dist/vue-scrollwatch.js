!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vue-scrollwatch",[],t):"object"==typeof exports?exports["vue-scrollwatch"]=t():e["vue-scrollwatch"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n.n(r),u=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){for(var t=0,n=e;n;)t+=n.offsetTop,n=n.offsetParent;return t},i=[.5,0,.35,1],c=!1,l=!1,f={},s={},p={},v=null,m=document.scrollingElement,d=null,y=150,b=0,h=new Event("scroll_watch_done"),w=function(e){null!=d&&clearTimeout(d),d=setTimeout(function(){var e=x(),t=u(e,2),n=t[0],r=t[1];c?c=!1:g(f,n,r),f.el=n.el,f.name=n.name,f.top=n.top,m.dispatchEvent(h)},y)},x=function(){var e=m.scrollTop;if(Object.keys(s).length!=Object.keys(p).length){p={};for(var t in s)p[s[t].top]=s[t].name}var n=Object.keys(p).sort(function(e,t){return e-t}),r=n.length-1;if(!(r<=0)){var o=s[p[n[0]]].el.offsetTop;return[T(n,e+o,0,r),n]}},T=function e(t,n,r,o){if(r==o)return s[p[t[r]]];var u=Math.floor((r+o)/2),a=Number(t[u]);return a<=n&&Number(t[u+1])>n?s[p[t[u]]]:a<=n?e(t,n,u+1,o):e(t,n,r,u-1)},g=function(e,t,n){var r=n.indexOf(e.top.toString()),o=n.indexOf(t.top.toString());if(r!=o){var u=r<o?1:-1;for(r+=u;u>0?r<=o:r>=o;r+=u){var a=s[p[n[r]]];a&&a.callback&&a.callback(a)}}},j=function(e){l&&(c=!0);var t=s[e];t&&(k(a(t.el)-a(m)+b),f.el=t.el,f.name=t.name,f.top=t.top)},O=function(e){return new Promise(function(t,n){l&&(c=!0);var r=s[e];r||n(e);var u=m.scrollTop,f=a(m),p=a(r.el)-f-u+b,d=o.a.apply(void 0,i),y=null,h=function n(o){y||(y=o);var a=o-y>=600?600:o-y,i=a/600,c=u+d(i)*(p-r.offset);k(c),a<600?v=window.requestAnimationFrame(n):(j(e),t(r))};window.requestAnimationFrame(h)})},k=function(e){m.scrollTop=e},E=function(e,t,n,r){0==Object.keys(s).length&&m.addEventListener("scroll",w);var o=t.value,u=o.name,a=o.offset,i=void 0===a?0:a,c=o.callback,l=e.offsetTop-i;if(e.attributes.name=u,f.top||(f.el=e,f.name=u,f.top=l,b=Math.max(0,m.offsetTop-e.offsetTop)),f.name){var v=x();v=v&&v[0].name,f.name!=v&&j(f.name)}u in s&&delete p[s[u].top],s[u]={name:u,offset:i,top:l,el:e,callback:c},p[l]=u},A={};A.install=function(e){e.directive("scrollWatch",{inserted:function(e,t,n){E(e,t)},unbind:function(e,t,n){delete p[s[t.value.name].top],delete s[t.value.name],0==Object.keys(s).length&&m&&(m.removeEventListener("scroll",w),m=document.scrollingElement),cancelAnimationFrame(v)},update:function(e,t,n){E(e,t)}})};var S=function(e){l=!!e},_=function(e){if(!(m=document.querySelector(e)))throw"[vue-scrollwatch] Element '"+e+"' was not found."},F=function(e){y=e};A.currentNode=f,A.jumpTo=j,A.scrollTo=O,A.setBlockWatchOnJump=S,A.setContainer=_,A.setScrollTimerDelay=F,t.default=A},function(e,t){function n(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function o(e){return 3*e}function u(e,t,u){return((n(t,u)*e+r(t,u))*e+o(t))*e}function a(e,t,u){return 3*n(t,u)*e*e+2*r(t,u)*e+o(t)}function i(e,t,n,r,o){var a,i,c=0;do{i=t+(n-t)/2,a=u(i,r,o)-e,a>0?n=i:t=i}while(Math.abs(a)>s&&++c<p);return i}function c(e,t,n,r){for(var o=0;o<f;++o){var i=a(t,n,r);if(0===i)return t;t-=(u(t,n,r)-e)/i}return t}function l(e){return e}var f=4,s=1e-7,p=10,v=11,m=1/(v-1),d="function"==typeof Float32Array;e.exports=function(e,t,n,r){function o(t){for(var r=0,o=1,u=v-1;o!==u&&f[o]<=t;++o)r+=m;--o;var l=(t-f[o])/(f[o+1]-f[o]),s=r+l*m,p=a(s,e,n);return p>=.001?c(t,s,e,n):0===p?s:i(t,r,r+m,e,n)}if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return l;for(var f=d?new Float32Array(v):new Array(v),s=0;s<v;++s)f[s]=u(s*m,e,n);return function(e){return 0===e?0:1===e?1:u(o(e),t,r)}}}])});
//# sourceMappingURL=vue-scrollwatch.js.map